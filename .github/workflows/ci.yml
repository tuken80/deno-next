on: [push, pull_request]
jobs:
  build:
    runs-on: ubuntu-latest
    container: circleci/node@1.1.6
    steps:
      - run: curl -fsSL https://deno.land/x/install/install.sh | sudo DENO_INSTALL=/usr/local sh
      - run: export PATH="$DENO_INSTALL/bin:$PATH"
      - run: npm install eslint typescript @typescript-eslint/eslint-plugin @typescript-eslint/parser eslint-config-prettier
      - run: sudo npm install -g prettier
      - run: prettier --check .
      - run: deno run --allow-run --allow-write --allow-read --allow-env ./mod.ts --check
